var DOMAIN="https://oauth2.razer.com",rz=rz||{_client_id:"",_client_key:"",_grant_type:"",_scope:"sso cop",_redirect_uri:document.location.href,_session_id:"",_tosSDKUrl:"https://sso-static.razer.com/rzid-tos-consent-sdk-v1.0.1.js",_tosConfig:null,init:function(e){if(null!=e.client_id&&(this._client_id=e.client_id),null!=e.client_key&&(this._client_key=e.client_key),null!=e.grant_type&&(this._grant_type=e.grant_type),null!=e.scope&&(this._scope=e.scope),null!=e.redirect_uri&&(this._redirect_uri=e.redirect_uri),null!=e.session_id&&(this._session_id=e.session_id),this._tosConfig={onReject:()=>{e.tosOnReject&&"function"==typeof e.tosOnReject?e.tosOnReject():window.location.href="https://razerid.razer.com/getmeout?client_id=c839026333341c074b79b27149f3783215c27663&redirect=https://www.razer.com/"},onLoad:e.tosOnLoad,tosLocale:e.tosLocale},void 0===window._RzidTosConsent){var n=document.createElement("script");n.type="text/javascript",n.src=this._tosSDKUrl,document.head.appendChild(n)}},set:function(e,n){switch(e){case"client_id":this._client_id=n;break;case"grant_type":this._grant_type=n;break;case"scope":this._scope=n;break;case"redirect_uri":this._redirect_uri=n;break;case"session_id":this._session_id=n}},_verifyService:function(e){var n={client_id:this._client_id,client_key:this._client_key,scope:this._scope},t=this._tosConfig;"object"==typeof e&&e.update_userinfo&&1==e.update_userinfo&&(n.update_userinfo=1),"object"==typeof e&&e.check_userconsent&&1==e.check_userconsent&&(n.check_userconsent=1);var o=[];for(var i in n){var s=encodeURIComponent(i),r=encodeURIComponent(n[i]);o.push(s+"="+r)}o=o.join("&"),fetch(DOMAIN+"/services/sso",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:o,credentials:"include",cache:"no-store"}).then((function(e){if(401===e.status)return e.json();if(!e.ok)throw e;return e.json()})).then((function(e){if(window.setInfo(e),e.access_token){const n=t.tosLocale||e.language;window._RzidTosConsent.init({...t,accessToken:e.access_token,uuid:e.uuid,lang:n})}})).catch((function(e){var n=rz._handleErrors(e);window.setInfo(n)}))},_getSessionService:function(){var e=DOMAIN+"/services/session?q="+Date.now()+"&client_id="+this._client_id;fetch(e,{method:"GET",credentials:"include",cache:"no-store"}).then((function(e){if(401===e.status)return e.json();if(!e.ok)throw e;return e.json()})).then((function(e){window.cbSession(e)})).catch((function(e){var n=rz._handleErrors(e);window.cbSession(n)}))},_putSessionService:function(e){var n={client_id:this._client_id,update_status:e},t=[];for(var o in n){var i=encodeURIComponent(o),s=encodeURIComponent(n[o]);t.push(i+"="+s)}t=t.join("&"),fetch(DOMAIN+"/services/session",{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:t,cache:"no-store"}).then((function(e){if(401===e.status)return e.json();if(!e.ok)throw e;return e.json()})).then((function(e){window.cbSession(e)})).catch((function(e){var n=rz._handleErrors(e);window.cbSession(n)}))},_loginService:function(e){var n={grant_type:this._grant_type,client_id:this._client_id,scope:this._scope,redirect_uri:this._redirect_uri};""!=this._session_id&&(n.session_id=this._session_id),e.username&&(n.username=e.username),e.password&&(n.password=e.password),e.uuid&&(n.uuid=e.uuid),e.token&&(n.token=e.token),e.nonce&&(n.nonce=e.nonce),e.session_id&&(n.session_id=e.session_id),e.read_token&&(n.read_token=e.read_token),e.consent_token&&(n.consent_token=e.consent_token);var t=[];for(var o in n){var i=encodeURIComponent(o),s=encodeURIComponent(n[o]);t.push(i+"="+s)}t=t.join("&"),fetch(DOMAIN+"/services/login_sso",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},credentials:"include",body:t,cache:"no-store"}).then((function(e){if(401===e.status)return e.json();if(!e.ok)throw e;return e.json()})).then((function(e){window.cbLogin(e)})).catch((function(e){var n=rz._handleErrors(e);window.cbLogin(n)}))},_logoutService:function(){var e=DOMAIN+"/services/logout?q="+Date.now();fetch(e,{method:"GET",cache:"no-store",credentials:"include"}).then((function(e){if(401===e.status)return e.json();if(!e.ok)throw e;return e.json()})).then((function(e){window.cbLogout(e)})).catch((function(e){var n=rz._handleErrors(e);window.cbLogout(n)}))},_handleErrors:function(e){return 504==e.status?JSON.parse('{"error":"request_timeout","error_description":"No response from server"}'):JSON.parse('{"error":"server_error","error_description":"An unknown error has occurred"}')},_rzlog:function(e,n,t,o){null!=window.RZSSODEBUG&&1==window.RZSSODEBUG&&(console.info(o),console.info(t))},verify:function(e){this._verifyService(e)},session:function(){this._getSessionService()},tap:function(){this._putSessionService(0)},update_status:function(){this._putSessionService(1)},ext_login:function(e){window.location.replace(DOMAIN+"/thirdparty?provider="+e+"&client_id="+this._client_id+"&jwt=1&redirect_uri="+this._redirect_uri)},login:function(e){this._loginService(e)},logout:function(){this._logoutService()}};try{window.RzSdk()}catch(e){console.warn("error: "+e.message)}